[env:esp32dev]
platform = espressif32
board = esp32dev
framework = arduino

# Upload and monitoring settings
upload_speed = 921600
monitor_speed = 115200
monitor_filters = esp32_exception_decoder

# Build flags for optimization and debugging
build_flags = 
    -DCORE_DEBUG_LEVEL=3
    -DARDUINOJSON_ENABLE_PROGMEM=1
    -DBOARD_HAS_PSRAM
    -DCONFIG_SPIRAM_SUPPORT=1
    -DGRIDTOKENX_IOT_VERSION="1.0.0"
    -DSSL_VERIFY_PEER=1

# Library dependencies for GridTokenX IoT Integration
lib_deps = 
    # Core WiFi and HTTP
    arduino-libraries/WiFi@^1.2.7
    esp32-arduino-libs/ESP32 HTTP Client@^1.0.0
    
    # JSON processing for blockchain API
    bblanchon/ArduinoJson@^6.21.2
    
    # OLED Display driver
    thingpulse/ESP8266 and ESP32 OLED driver for SSD1306 displays@^4.4.0
    
    # Environmental sensors
    adafruit/DHT sensor library@^1.4.4
    adafruit/Adafruit Unified Sensor@^1.1.9
    
    # Cryptography and security
    rweather/Crypto@^0.4.0
    
    # Time synchronization
    arduino-libraries/NTPClient@^3.2.1
    
    # SD Card storage
    arduino-libraries/SD@^1.2.4
    
    # Real-time clock
    adafruit/RTClib@^2.1.1
    
    # Advanced ADC for power measurements
    robtillaart/ADS1115@^0.3.4
    
    # WS2812 RGB LEDs
    fastled/FastLED@^3.5.0
    
    # MQTT for advanced IoT communication (optional)
    knolleary/PubSubClient@^2.8.0
    
    # Over-the-air updates
    arduino-libraries/ArduinoOTA@^1.0.9

# Advanced build options
build_type = release
build_unflags = -std=gnu++11
build_flags = 
    ${env.build_flags}
    -std=gnu++17
    -O2
    -DUSE_ESP32_TASK_WDT

# Custom upload port (auto-detect)
# upload_port = /dev/ttyUSB0  # Linux
# upload_port = COM3          # Windows  
# upload_port = /dev/cu.usbserial-*  # macOS
    rweather/Crypto@^0.4.0
    
    # Time handling
    arduino-libraries/NTPClient@^3.2.1

# Partition scheme for OTA updates
board_build.partitions = huge_app.csv

# Enable filesystem
board_build.filesystem = littlefs
